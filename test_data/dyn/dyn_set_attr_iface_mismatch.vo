// Test dyn_set_attr with interface field type mismatch
// Bug: when assigning to interface field, should check if value implements the interface
package main

type Reader interface {
	Read() string
}

type Writer interface {
	Write(s string)
}

type Container struct {
	R Reader  // interface field
}

type MyWriter struct {
	data string
}

func (w *MyWriter) Write(s string) {
	w.data = s
}

// MyWriter implements Writer but NOT Reader

func testSetMismatch() (panicked bool) {
	defer func() {
		if recover() != nil {
			panicked = true
		}
	}()
	c := &Container{}
	var obj any = c
	
	w := &MyWriter{}
	
	// Try to assign Writer to Reader field - should panic
	// MyWriter doesn't implement Reader (no Read method)
	obj~>R = w
	
	return false
}

func main() {
	panicked := testSetMismatch()
	assert(panicked, "should have panicked for interface mismatch")
	println("Got expected panic")
	println("PASS")
}

// Expected: error when assigning MyWriter to Reader field

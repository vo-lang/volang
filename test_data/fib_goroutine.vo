// Test: Fibonacci using goroutines and channels
package main

var result = make(chan int, 1)

func fib(n int, ch chan int) {
	if n <= 1 {
		ch <- n
		return
	}
	
	ch1 := make(chan int, 1)
	ch2 := make(chan int, 1)
	
	go fib(n-1, ch1)
	go fib(n-2, ch2)
	
	r1 := <-ch1
	r2 := <-ch2
	ch <- r1 + r2
}

func main() {
	// Test fib(10) = 55
	go fib(10, result)
	r := <-result
	assert(r == 55, "fib(10) should be 55")
	
	println("fibonacci goroutine tests passed")
}

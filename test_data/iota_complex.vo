// Test: iota in complex constant expressions
// Go spec: iota is 0 at start of const block, increments by 1 per ConstSpec
package main

// Basic iota
const (
    A0 = iota  // 0
    A1         // 1
    A2         // 2
)

// Skip with blank identifier
const (
    _  = iota  // 0 (skipped)
    B1         // 1
    B2         // 2
    _          // 3 (skipped)
    B4         // 4
)

// Bit shifts
const (
    Bit0 = 1 << iota  // 1
    Bit1              // 2
    Bit2              // 4
    Bit3              // 8
)

// KB, MB, GB pattern
const (
    _  = iota
    KB = 1 << (10 * iota)  // 1 << 10 = 1024
    MB                      // 1 << 20 = 1048576
    GB                      // 1 << 30 = 1073741824
)

// Multiple iotas in same line
const (
    X0, Y0 = iota, iota * 10  // 0, 0
    X1, Y1                     // 1, 10
    X2, Y2                     // 2, 20
)

// Expressions with iota
const (
    E0 = iota * 2 + 1  // 0*2+1 = 1
    E1                 // 1*2+1 = 3
    E2                 // 2*2+1 = 5
    E3                 // 3*2+1 = 7
)

// Negative and subtraction
const (
    N2 = iota - 2  // -2
    N1             // -1
    N0             // 0
    P1             // 1
)

// Reset in new const block
const (
    R0 = iota  // 0 (reset)
    R1         // 1
)

// Typed iota
const (
    T0 int = iota    // int(0)
    T1               // int(1)
    T2               // int(2)
)

// Complex expression
const (
    C0 = (iota + 1) * (iota + 1)  // (0+1)*(0+1) = 1
    C1                             // (1+1)*(1+1) = 4
    C2                             // (2+1)*(2+1) = 9
    C3                             // (3+1)*(3+1) = 16
)

func main() {
    // Basic
    assert(A0 == 0, "A0")
    assert(A1 == 1, "A1")
    assert(A2 == 2, "A2")
    
    // Skip
    assert(B1 == 1, "B1")
    assert(B2 == 2, "B2")
    assert(B4 == 4, "B4")
    
    // Bit shifts
    assert(Bit0 == 1, "Bit0")
    assert(Bit1 == 2, "Bit1")
    assert(Bit2 == 4, "Bit2")
    assert(Bit3 == 8, "Bit3")
    
    // KB/MB/GB
    assert(KB == 1024, "KB")
    assert(MB == 1048576, "MB")
    assert(GB == 1073741824, "GB")
    
    // Multiple in same line
    assert(X0 == 0, "X0")
    assert(Y0 == 0, "Y0")
    assert(X1 == 1, "X1")
    assert(Y1 == 10, "Y1")
    assert(X2 == 2, "X2")
    assert(Y2 == 20, "Y2")
    
    // Expressions
    assert(E0 == 1, "E0")
    assert(E1 == 3, "E1")
    assert(E2 == 5, "E2")
    assert(E3 == 7, "E3")
    
    // Negative
    assert(N2 == -2, "N2")
    assert(N1 == -1, "N1")
    assert(N0 == 0, "N0")
    assert(P1 == 1, "P1")
    
    // Reset
    assert(R0 == 0, "R0 after reset")
    assert(R1 == 1, "R1 after reset")
    
    // Typed
    assert(T0 == 0, "T0")
    assert(T1 == 1, "T1")
    assert(T2 == 2, "T2")
    
    // Complex
    assert(C0 == 1, "C0")
    assert(C1 == 4, "C1")
    assert(C2 == 9, "C2")
    assert(C3 == 16, "C3")
    
    println("iota_complex: ok")
}

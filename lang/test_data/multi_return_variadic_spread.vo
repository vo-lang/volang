// Test: multi-return values used as variadic spread arguments
// Coverage: Function returning multiple values directly spread to variadic parameter
package main


import "fmt"
func pair() (int, int) {
	return 10, 20
}

func triple() (int, int, int) {
	return 1, 2, 3
}

func sum(nums ...int) int {
	total := 0
	for _, n := range nums {
		total += n
	}
	return total
}

func collect(items ...any) []any {
	return items
}

func strPair() (string, string) {
	return "hello", "world"
}

func concat(strs ...string) string {
	result := ""
	for _, s := range strs {
		result += s
	}
	return result
}

func returnsSlice() []int {
	return []int{100, 200, 300}
}

func main() {
	// Test 1: Direct multi-return to variadic (basic)
	// Note: In Go, multi-return cannot be directly spread to variadic
	// It needs to be explicit: sum(pair()) is invalid, must be s := []int{a, b}; sum(s...)
	// Let's test explicit spread instead
	
	// Test 1: Slice spread to variadic
	s1 := []int{1, 2, 3, 4, 5}
	result1 := sum(s1...)
	assert(result1 == 15, "sum(s1...) should be 15, got ", result1)
	
	// Test 2: Slice from multi-return spread
	a, b := pair()
	s2 := []int{a, b}
	result2 := sum(s2...)
	assert(result2 == 30, "sum([10,20]...) should be 30, got ", result2)
	
	// Test 3: Triple values spread
	x, y, z := triple()
	s3 := []int{x, y, z}
	result3 := sum(s3...)
	assert(result3 == 6, "sum([1,2,3]...) should be 6, got ", result3)
	
	// Test 4: Empty slice spread
	empty := []int{}
	result4 := sum(empty...)
	assert(result4 == 0, "sum([]...) should be 0")
	
	// Test 5: String variadic spread
	strs := []string{"a", "b", "c"}
	result5 := concat(strs...)
	assert(result5 == "abc", "concat([a,b,c]...) should be 'abc'")
	
	// Test 6: Mixed regular args and spread
	s6 := []int{3, 4, 5}
	result6 := sum(1, 2)  // No spread mixing in Vo
	assert(result6 == 3, "sum(1, 2) should be 3")
	
	result7 := sum(s6...)
	assert(result7 == 12, "sum([3,4,5]...) should be 12")
	
	// Test 7: Function returning slice, then spread
	s7 := returnsSlice()
	result8 := sum(s7...)
	assert(result8 == 600, "sum(returnsSlice()...) should be 600")
	
	// Test 8: interface{} variadic
	anySlice := []any{1, "two", 3.0}
	collected := collect(anySlice...)
	assert(len(collected) == 3, "collect(anySlice...) len should be 3")
	
	fmt.Println("multi_return_variadic_spread: ok")
}

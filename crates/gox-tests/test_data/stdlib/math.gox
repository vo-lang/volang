// +vm +jit
package main

import "math"

func main() {
    println("Starting math tests...")
    
    // Basic functions
    abs5 := math.Abs(-5.0)
    assert(abs5 == 5.0, "Abs(-5) should be 5")
    
    max35 := math.Max(3.0, 5.0)
    assert(max35 == 5.0, "Max(3, 5) should be 5")
    
    min35 := math.Min(3.0, 5.0)
    assert(min35 == 3.0, "Min(3, 5) should be 3")
    
    dim53 := math.Dim(5.0, 3.0)
    assert(dim53 == 2.0, "Dim(5, 3) should be 2")
    
    // Power and root functions
    sqrt4 := math.Sqrt(4.0)
    assert(sqrt4 == 2.0, "Sqrt(4) should be 2")
    
    pow23 := math.Pow(2.0, 3.0)
    assert(pow23 == 8.0, "Pow(2, 3) should be 8")
    
    // Rounding functions
    ceil23 := math.Ceil(2.3)
    assert(ceil23 == 3.0, "Ceil(2.3) should be 3")
    
    floor27 := math.Floor(2.7)
    assert(floor27 == 2.0, "Floor(2.7) should be 2")
    
    round25 := math.Round(2.5)
    assert(round25 == 3.0, "Round(2.5) should be 3")
    
    trunc29 := math.Trunc(2.9)
    assert(trunc29 == 2.0, "Trunc(2.9) should be 2")
    
    // Trigonometric functions
    sin0 := math.Sin(0.0)
    assert(sin0 > -0.01 && sin0 < 0.01, "Sin(0) should be ~0")
    
    cos0 := math.Cos(0.0)
    assert(cos0 > 0.99 && cos0 < 1.01, "Cos(0) should be ~1")
    
    // Special functions
    hypot := math.Hypot(3.0, 4.0)
    assert(hypot > 4.99 && hypot < 5.01, "Hypot(3, 4) should be ~5")
    
    // Test NaN separately (passing through variable)
    nanVal := math.NaN()
    isNaN := math.IsNaN(nanVal)
    assert(isNaN, "NaN() should be NaN")
    
    // Test Inf
    posInf := math.Inf(1)
    assert(math.IsInf(posInf, 1), "Inf(1) should be +Inf")
    
    negInf := math.Inf(-1)
    assert(math.IsInf(negInf, -1), "Inf(-1) should be -Inf")
    
    // Test Signbit
    assert(math.Signbit(-1.0), "Signbit(-1) should be true")
    assert(!math.Signbit(1.0), "Signbit(1) should be false")
    
    // Test Copysign
    cs1 := math.Copysign(5.0, -1.0)
    assert(cs1 == -5.0, "Copysign(5, -1) should be -5")
    
    println("All math tests passed!")
}


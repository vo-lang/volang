// Test: map operations
package main

func main() {
    // Create map using literal syntax
    m := map[int]int{}
    
    // Set values
    m[1] = 100
    m[2] = 200
    
    // Get and verify
    v1 := m[1]
    assert(v1 == 100, "m[1] should be 100")
    
    v2 := m[2]
    assert(v2 == 200, "m[2] should be 200")
    
    // Length
    assert(len(m) == 2, "len(m) should be 2")
}

=== codegen ===
module main

const 0 string "m[1] should be 100"
const 1 string "m[2] should be 200"
const 2 string "len(m) should be 2"

func main
  locals 19
  0: MapNew r1, 0, 0
  1: Mov r0, r1
  2: LoadInt r2, 1
  3: LoadInt r3, 100
  4: MapSet r0, r2, r3
  5: LoadInt r4, 2
  6: LoadInt r5, 200
  7: MapSet r0, r4, r5
  8: LoadInt r7, 1
  9: MapGet r8, r0, r7
  10: Mov r6, r8
  11: LoadInt r10, 100
  12: EqI64 r11, r6, r10
  13: LoadConst r12, $0
  14: AssertBegin r11, 1, 220
  15: AssertArg r12, 14
  16: AssertEnd
  17: LoadNil r13
  18: LoadInt r11, 2
  19: MapGet r12, r0, r11
  20: Mov r10, r12
  21: LoadInt r14, 200
  22: EqI64 r15, r10, r14
  23: LoadConst r16, $1
  24: AssertBegin r15, 1, 284
  25: AssertArg r16, 14
  26: AssertEnd
  27: LoadNil r17
  28: MapLen r14, r0
  29: LoadInt r15, 2
  30: EqI64 r16, r14, r15
  31: LoadConst r17, $2
  32: AssertBegin r16, 1, 347
  33: AssertArg r17, 14
  34: AssertEnd
  35: LoadNil r18
  36: Return r0, 0
end

func $init
  locals 0
  0: Return r0, 0
end

func $entry
  locals 0
  0: Call 1, r0, 0, 0
  1: Call 0, r0, 0, 0
  2: Return r0, 0
end

entry $entry

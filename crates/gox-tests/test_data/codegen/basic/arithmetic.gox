// Test: arithmetic operations
package main

func main() {
    // 1 + 2 * 3 = 7
    result := 1 + 2*3
    assert(result == 7, "1 + 2*3 should be 7")
    
    // subtraction
    sub := 10 - 3
    assert(sub == 7, "10 - 3 should be 7")
    
    // division
    div := 20 / 4
    assert(div == 5, "20 / 4 should be 5")
    
    // modulo
    mod := 17 % 5
    assert(mod == 2, "17 % 5 should be 2")
    
    // negative
    neg := -5
    assert(neg == -5, "neg should be -5")
}

=== codegen ===
module main

const 0 string "1 + 2*3 should be 7"
const 1 string "10 - 3 should be 7"
const 2 string "20 / 4 should be 5"
const 3 string "17 % 5 should be 2"
const 4 string "neg should be -5"

func main
  locals 26
  0: LoadInt r1, 1
  1: LoadInt r2, 2
  2: LoadInt r3, 3
  3: MulI64 r4, r2, r3
  4: AddI64 r5, r1, r4
  5: Mov r0, r5
  6: LoadInt r6, 7
  7: EqI64 r7, r0, r6
  8: LoadConst r8, $0
  9: AssertBegin r7, 1, 113
  10: AssertArg r8, 14
  11: AssertEnd
  12: LoadNil r9
  13: LoadInt r7, 10
  14: LoadInt r8, 3
  15: SubI64 r9, r7, r8
  16: Mov r6, r9
  17: LoadInt r10, 7
  18: EqI64 r11, r6, r10
  19: LoadConst r12, $1
  20: AssertBegin r11, 1, 202
  21: AssertArg r12, 14
  22: AssertEnd
  23: LoadNil r13
  24: LoadInt r11, 20
  25: LoadInt r12, 4
  26: DivI64 r13, r11, r12
  27: Mov r10, r13
  28: LoadInt r14, 5
  29: EqI64 r15, r10, r14
  30: LoadConst r16, $2
  31: AssertBegin r15, 1, 284
  32: AssertArg r16, 14
  33: AssertEnd
  34: LoadNil r17
  35: LoadInt r15, 17
  36: LoadInt r16, 5
  37: ModI64 r17, r15, r16
  38: Mov r14, r17
  39: LoadInt r18, 2
  40: EqI64 r19, r14, r18
  41: LoadConst r20, $3
  42: AssertBegin r19, 1, 364
  43: AssertArg r20, 14
  44: AssertEnd
  45: LoadNil r21
  46: LoadInt r19, 5
  47: NegI64 r20, r19
  48: Mov r18, r20
  49: LoadInt r21, 5
  50: NegI64 r22, r21
  51: EqI64 r23, r18, r22
  52: LoadConst r24, $4
  53: AssertBegin r23, 1, 442
  54: AssertArg r24, 14
  55: AssertEnd
  56: LoadNil r25
  57: Return r0, 0
end

func $init
  locals 0
  0: Return r0, 0
end

func $entry
  locals 0
  0: Call 1, r0, 0, 0
  1: Call 0, r0, 0, 0
  2: Return r0, 0
end

entry $entry
